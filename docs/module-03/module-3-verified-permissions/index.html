<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-module-03/module-3-verified-permissions" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Module 3: Amazon Verified Permissions | Serverless Security Workshop</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/img/aws-logo.png"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/img/aws-logo.png"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/docs/module-03/module-3-verified-permissions"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Module 3: Amazon Verified Permissions | Serverless Security Workshop"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/img/aws-logo.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/docs/module-03/module-3-verified-permissions"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/docs/module-03/module-3-verified-permissions" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/docs/module-03/module-3-verified-permissions" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Module 3: Amazon Verified Permissions","item":"https://your-docusaurus-site.example.com/docs/module-03/module-3-verified-permissions"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Serverless Security Workshop RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Serverless Security Workshop Atom Feed"><link rel="stylesheet" href="/assets/css/styles.e9f0cf4c.css">
<script src="/assets/js/runtime~main.93d102ee.js" defer="defer"></script>
<script src="/assets/js/main.f58791e0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/aws-logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/aws-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/aws-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Serverless Security Workshop</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Modules</a><a class="navbar__item navbar__link" href="/contributor">Contributors</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/khanhquoc4114/serverless-security-workshop" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro"><span title="Serverless Security Workshop" class="linkLabel_WmDU">Serverless Security Workshop</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/module-00/module-0-initial-setup"><span title="Module 0: Initial Setup" class="categoryLinkLabel_W154">Module 0: Initial Setup</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/module-01/module-1-authentication-authorization"><span title="Module 1: Add Authentication and Authorization" class="categoryLinkLabel_W154">Module 1: Add Authentication and Authorization</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/module-02/module-2-lambda-iam"><span title="Module 2: Lambda IAM" class="categoryLinkLabel_W154">Module 2: Lambda IAM</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/module-03/module-3-verified-permissions"><span title="Module 3: Amazon Verified Permissions" class="categoryLinkLabel_W154">Module 3: Amazon Verified Permissions</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/module-03/module-3-verified-permissions"><span title="Module 3: Amazon Verified Permissions" class="linkLabel_WmDU">Module 3: Amazon Verified Permissions</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/module-04/module-4-secrets"><span title="Module 4: Secrets" class="categoryLinkLabel_W154">Module 4: Secrets</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/module-05/module-5-input-validation"><span title="Module 5: Input validation on API Gateway" class="categoryLinkLabel_W154">Module 5: Input validation on API Gateway</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/module-06/module-6-dependency-vulnerability"><span title="Module 6: Dependency Vulnerability" class="categoryLinkLabel_W154">Module 6: Dependency Vulnerability</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/module-07/module-7-amazon-inspector"><span title="Module 7: Amazon Inspector" class="categoryLinkLabel_W154">Module 7: Amazon Inspector</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/module-08/module-8-encryption"><span title="Module 8: Encryption in Transit" class="categoryLinkLabel_W154">Module 8: Encryption in Transit</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/module-09/module-9-usage-plans"><span title="Module 9: Usage Plans" class="categoryLinkLabel_W154">Module 9: Usage Plans</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/module-10/module-10-waf"><span title="Module 10: WAF" class="categoryLinkLabel_W154">Module 10: WAF</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/module-12/module-12-xray"><span title="Module 12: X-Ray" class="categoryLinkLabel_W154">Module 12: X-Ray</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/clean-up-resources/resource-cleanup"><span title="Clean up resources" class="categoryLinkLabel_W154">Clean up resources</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Module 3: Amazon Verified Permissions</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Module 3: Amazon Verified Permissions</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Module 3: Amazon Verified Permissions</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" translate="no">​</a></h2>
<ul>
<li class="">
<p>Monolithic applications typically have centralized permissions in code</p>
</li>
<li class="">
<p>Distributed microservices spread permissions and logs across multiple services</p>
</li>
<li class="">
<p>This distributed model loses central control and makes auditing difficult</p>
</li>
<li class="">
<p>Authorization-as-a-service regains centralized access control and logging</p>
</li>
<li class="">
<p>It enables iteration on least privilege principles</p>
</li>
<li class="">
<p>It implements zero trust architecture</p>
</li>
<li class="">
<p>It makes applications audit-friendly and AI-ready</p>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-amazon-verified-permissions">What is Amazon Verified Permissions?<a href="#what-is-amazon-verified-permissions" class="hash-link" aria-label="Direct link to What is Amazon Verified Permissions?" title="Direct link to What is Amazon Verified Permissions?" translate="no">​</a></h3>
<ul>
<li class="">
<p>AVP is an authorization-as-a-service solution</p>
</li>
<li class="">
<p>It replaces custom application-specific authorization systems</p>
</li>
<li class="">
<p>Applications or enforcement points (like API Gateway) call AVP to check access</p>
</li>
<li class="">
<p>AVP determines if a user can access a resource based on policies</p>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="architecture">Architecture<a href="#architecture" class="hash-link" aria-label="Direct link to Architecture" title="Direct link to Architecture" translate="no">​</a></h3>
<ol>
<li class="">
<p>Partner Admin API uses AVP Quick Start for rapid authorization enforcement</p>
</li>
<li class="">
<p>The architecture includes:</p>
<ul>
<li class="">Cognito Users and Groups</li>
<li class="">Amazon Verified Permissions Policy Store</li>
<li class="">API Gateway with AVP Authorizer</li>
<li class="">Partner Admin API enforcement</li>
</ul>
</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-28-13-07-04-8fd54acd9d6615ae2ff13e66a86c2e03.png" width="941" height="720" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="module-3a-add-partner-users-to-cognito-groups">Module 3A: Add Partner Users to Cognito Groups<a href="#module-3a-add-partner-users-to-cognito-groups" class="hash-link" aria-label="Direct link to Module 3A: Add Partner Users to Cognito Groups" title="Direct link to Module 3A: Add Partner Users to Cognito Groups" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="part-1-update-cloudformation-template">Part 1: Update CloudFormation Template<a href="#part-1-update-cloudformation-template" class="hash-link" aria-label="Direct link to Part 1: Update CloudFormation Template" title="Direct link to Part 1: Update CloudFormation Template" translate="no">​</a></h3>
<ol>
<li class="">
<p>Open VS Code and navigate to <code>src/template.yaml</code></p>
</li>
<li class="">
<p>Add the following CloudFormation resources to the Resources section:</p>
</li>
</ol>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Unicorn Partner API and Cognito resources - AVP Module</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">CognintoUserPoolGroupAdmin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">Type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> AWS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Cognito</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">UserPoolGroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">Properties</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">Description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Admin user group to manage partners</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">GroupName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> admin</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">users</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">UserPoolId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token tag" style="color:#00009f">!Ref</span><span class="token plain"> CognitoUserPool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">CognitoUserPoolGroupPowerUser</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">Type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> AWS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Cognito</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">UserPoolGroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">Properties</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">Description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Power user group with limited admin access</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">GroupName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> power</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">users</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">UserPoolId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token tag" style="color:#00009f">!Ref</span><span class="token plain"> CognitoUserPool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">UserPoolClient</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">Type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> AWS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Cognito</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">UserPoolClient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">Properties</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ClientName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> avp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">admin</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">GenerateSecret</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">UserPoolId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token tag" style="color:#00009f">!Ref</span><span class="token plain"> CognitoUserPool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ExplicitAuthFlows</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ADMIN_NO_SRP_AUTH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> USER_PASSWORD_AUTH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">UnicornPartnerApi</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">Type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> AWS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Serverless</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">Properties</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">StageName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">DefinitionBody</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">swagger</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">info</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> UnicornPartnerAPI</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">AVP</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Module</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Wild Ryde API for describing and managing unicorn partners for the AVP module</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;/partners&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token key atrule" style="color:#00a4db">post</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">x-amazon-apigateway-integration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">httpMethod</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> POST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> aws_proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">uri</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">Fn::Sub</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> arn</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">aws</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">apigateway</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">AWS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Region</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">lambda</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">path/2015</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">03</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">31/functions/$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ManagePartnerFunction.Arn</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/invocations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">responses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">consumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">responses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">&quot;200&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;200 response&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">Access-Control-Allow-Origin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">Access-Control-Allow-Methods</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">Access-Control-Allow-Headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">x-amazon-apigateway-integration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">responses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">default</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">statusCode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;200&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">responseParameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">method.response.header.Access-Control-Allow-Methods</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&#x27;OPTIONS,POST,GET&#x27;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">method.response.header.Access-Control-Allow-Headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&#x27;Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token&#x27;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">method.response.header.Access-Control-Allow-Origin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&#x27;*&#x27;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">requestTemplates</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">application/json</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{\&quot;statusCode\&quot;: 200}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">passthroughBehavior</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;when_no_match&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mock&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">x-amazon-apigateway-gateway-responses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">DEFAULT_5XX</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token key atrule" style="color:#00a4db">responseParameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">gatewayresponse.header.Access-Control-Allow-Methods</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&#x27;GET,OPTIONS&#x27;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">gatewayresponse.header.Access-Control-Allow-Origin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&#x27;*&#x27;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">gatewayresponse.header.Access-Control-Allow-Headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&#x27;Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token&#x27;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">DEFAULT_4XX</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token key atrule" style="color:#00a4db">responseParameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">gatewayresponse.header.Access-Control-Allow-Methods</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&#x27;GET,OPTIONS&#x27;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">gatewayresponse.header.Access-Control-Allow-Origin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&#x27;*&#x27;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">gatewayresponse.header.Access-Control-Allow-Headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&#x27;Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token&#x27;&quot;</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-08-42-37-d1b1842c2c6c263a200141c5cb5fb401.png" width="612" height="535" class="img_ev3q"></p>
<ol start="3">
<li class="">Add the Lambda function event for AVP under ManagePartnerFunction:</li>
</ol>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">CreatePartnerAVP</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">Type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">Properties</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /partners</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Method</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> post</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">RestApiId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">Ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> UnicornPartnerApi</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-08-45-30-bec1cff0e0ecc6b074badbc602023649.png" width="435" height="356" class="img_ev3q"></p>
<ol start="4">
<li class="">Add outputs to the template file at the end:</li>
</ol>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">AVPApiURL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">Description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;API endpoint URL for dev environment&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">Value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token tag" style="color:#00009f">!Sub</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://${UnicornPartnerApi}.execute-api.${AWS::Region}.amazonaws.com/dev/&quot;</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-08-47-06-c09833f8ad98970848e7012a90e0d19e.png" width="698" height="189" class="img_ev3q"></p>
<ol start="5">
<li class="">
<p>Save the <code>src/template.yaml</code> file</p>
</li>
<li class="">
<p>Open a terminal and navigate to the src folder</p>
</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /Workshop/src</span><br></span></code></pre></div></div>
<ol start="7">
<li class="">Validate the SAM template</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sam validate -t template.yaml --region $REGION</span><br></span></code></pre></div></div>
<ol start="8">
<li class="">Deploy the updated stack</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws cloudformation package --output-template-file packaged.yaml --template-file template.yaml --s3-bucket $DeploymentS3Bucket --s3-prefix securityworkshop --region $REGION &amp;&amp; aws cloudformation deploy --template-file packaged.yaml --stack-name CustomizeUnicorns --region $REGION --capabilities CAPABILITY_IAM</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-08-49-41-2bc59cac1981e5204a2248a5ea172b57.png" width="1021" height="288" class="img_ev3q"></p>
<ol start="9">
<li class="">
<p>Wait for the stack deployment to complete</p>
</li>
<li class="">
<p>Retrieve the AVP API endpoint URL</p>
</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws cloudformation --region $REGION describe-stacks --stack-name CustomizeUnicorns --query &#x27;Stacks[0].Outputs[?OutputKey==`AVPApiURL`].OutputValue&#x27; --output text</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="641" height="98" class="img_ev3q"></p>
<ol start="11">
<li class="">Copy the API endpoint URL to your notes file</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="part-2-retrieve-cognito-configuration">Part 2: Retrieve Cognito Configuration<a href="#part-2-retrieve-cognito-configuration" class="hash-link" aria-label="Direct link to Part 2: Retrieve Cognito Configuration" title="Direct link to Part 2: Retrieve Cognito Configuration" translate="no">​</a></h3>
<ol start="12">
<li class="">
<p>Open the <a href="https://console.aws.amazon.com/cognito/home" target="_blank" rel="noopener noreferrer" class="">AWS Cognito Console</a></p>
</li>
<li class="">
<p>Click on the user pool named <strong>CustomizeUnicorns-users</strong></p>
</li>
<li class="">
<p>On the Overview page, copy the <strong>User pool ID</strong></p>
</li>
<li class="">
<p>Copy the <strong>Token signing key URL</strong></p>
</li>
<li class="">
<p>Save both values to your notes file</p>
</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-08-53-37-7fce90c980b4c2c8b88d44f35bc7a363.png" width="1334" height="915" class="img_ev3q"></p>
<ol start="17">
<li class="">
<p>Click on the <strong>App integration</strong> tab</p>
</li>
<li class="">
<p>Scroll down to the <strong>App clients</strong> section</p>
</li>
<li class="">
<p>Copy the <strong>Client ID</strong> of the <strong>avp-admin-client</strong></p>
</li>
<li class="">
<p>Save the Client ID to your notes file</p>
</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-08-56-13-cc7f0ace378d5cb02c3c10b5298f18e4.png" width="1334" height="915" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="part-3-create-users-in-cognito">Part 3: Create Users in Cognito<a href="#part-3-create-users-in-cognito" class="hash-link" aria-label="Direct link to Part 3: Create Users in Cognito" title="Direct link to Part 3: Create Users in Cognito" translate="no">​</a></h3>
<ol start="21">
<li class="">Click on the <strong>Users</strong> tab</li>
<li class="">Click the <strong>Create user</strong> button</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-08-57-37-d1f24e286c716bda3ce5a4d5f118415a.png" width="1334" height="915" class="img_ev3q"></p>
<ol start="23">
<li class="">
<p>Enter a username (e.g., username)</p>
</li>
<li class="">
<p>Enter a password that meets the password requirements (e.g., Username*)</p>
</li>
<li class="">
<p>Click <strong>Create user</strong></p>
</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-09-00-22-39cbe550df75ea93be078dff11ed0c53.png" width="1019" height="915" class="img_ev3q"></p>
<ol start="26">
<li class="">User is created with &quot;Force change password&quot; status</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-09-01-51-13b04fb9ebbac60bfac27cd9e90ad8ec.png" width="1047" height="915" class="img_ev3q"></p>
<ol start="27">
<li class="">Run the following command to set a permanent password:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws cognito-idp admin-set-user-password --user-pool-id us-east-1_pQCiCwl0K --username username --password &quot;Password123!&quot; --permanent</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="564" height="68" class="img_ev3q">
28.  Click on the newly created user to open the user detail page</p>
<ol start="29">
<li class="">
<p>Scroll down to the <strong>Group memberships</strong> section</p>
</li>
<li class="">
<p>Click <strong>Add user to a group</strong></p>
</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-09-06-55-cff0a6b4d00e2bc929d20647cb66b9a6.png" width="1114" height="915" class="img_ev3q"></p>
<ol start="31">
<li class="">
<p>Select the <strong>admin-users</strong> group</p>
</li>
<li class="">
<p>Click <strong>Add</strong></p>
</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-09-07-39-dfacaa0dfc48f0f15ecbefcb3616ee4e.png" width="1114" height="915" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="part-4-create-power-user">Part 4: Create Power User<a href="#part-4-create-power-user" class="hash-link" aria-label="Direct link to Part 4: Create Power User" title="Direct link to Part 4: Create Power User" translate="no">​</a></h3>
<ol start="33">
<li class="">Repeat steps 22-25 to create another user (e.g., username2)</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-29-16-8e039278ecf52c0472ab8c84da3a8ae4.png" width="1117" height="915" class="img_ev3q"></p>
<ol start="34">
<li class="">Set a permanent password for the second user:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws cognito-idp admin-set-user-password --user-pool-id us-east-1_pQCiCwl0K --username username2 --password &quot;Password123!&quot; --permanent</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="564" height="71" class="img_ev3q"></p>
<ol start="35">
<li class="">Add the second user to the <strong>power-users</strong> group</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-30-51-26ca9acf5680763f1fb1ba13dc7dbb78.png" width="1117" height="915" class="img_ev3q">
<img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-31-25-5503deecaad91abdbe78691ceb9c51a7.png" width="1117" height="915" class="img_ev3q"></p>
<ol start="36">
<li class="">Verify you have created:</li>
</ol>
<ul>
<li class="">One admin user (username) in admin-users group</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-33-27-7cc8b1588237d0b86aa3dedfbf8fbf51.png" width="1178" height="915" class="img_ev3q"></p>
<ul>
<li class="">One power user (username2) in power-users group</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-32-50-308b2f09b8842e015146ef90c812ee41.png" width="1178" height="915" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="module-3b-admin-service-authorization-using-amazon-verified-permission">Module 3B: Admin Service Authorization using Amazon Verified Permission<a href="#module-3b-admin-service-authorization-using-amazon-verified-permission" class="hash-link" aria-label="Direct link to Module 3B: Admin Service Authorization using Amazon Verified Permission" title="Direct link to Module 3B: Admin Service Authorization using Amazon Verified Permission" translate="no">​</a></h2>
<p>To get started, we need to create an Amazon Verified Permissions policy store. A policy store is a container for policies and policy templates. We recommend creating one policy store per application, or one policy store per tenant for multi-tenant applications.</p>
<p>We&#x27;ll use Amazon Verified Permissions Quick Start to quickly provision Policy Store based on the Partner Admin API resources and Cognito Userpool Groups. We&#x27;ll then attach the AVP provisioned Authorizer to the Partner Admin API to enforce the authorization decision.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="create-a-policy-store">Create a Policy Store<a href="#create-a-policy-store" class="hash-link" aria-label="Direct link to Create a Policy Store" title="Direct link to Create a Policy Store" translate="no">​</a></h3>
<ol>
<li class="">
<p>Log into the AWS Console and open <a href="https://console.aws.amazon.com/verifiedpermissions/home" target="_blank" rel="noopener noreferrer" class="">Amazon Verified Permissions Console</a></p>
</li>
<li class="">
<p>If you haven&#x27;t created any policy stores in this AWS region yet, click <strong>Create policy store</strong> in the top right</p>
</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-36-19-8b5d16dbb1cec3d4f863590ee51d2219.png" width="1440" height="915" class="img_ev3q"></p>
<ol start="3">
<li class="">Under <strong>Specify policy store details</strong>, choose <strong>Set up with API Gateway and an identity provider</strong>, and click <strong>Next</strong></li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-37-03-c872fd186121ffe851eda9d63079e6f2.png" width="1440" height="915" class="img_ev3q"></p>
<ol start="4">
<li class="">On the <strong>Import resources and actions</strong> page:</li>
</ol>
<ul>
<li class=""><strong>API</strong>: Select <code>UnicornPartnerAPI-AVP-Module</code></li>
<li class=""><strong>Deployment stage</strong>: Select <code>dev</code></li>
<li class="">Click <strong>Next</strong></li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-37-37-94ba51ebcd23606a0bbb0e028b1e8f90.png" width="1440" height="915" class="img_ev3q"></p>
<ol start="5">
<li class="">On the <strong>Choose identity source</strong> page:</li>
</ol>
<ul>
<li class="">Choose <code>Amazon Cognito</code> for the OpenID Connect provider type</li>
<li class="">Select <code>CustomizeUnicorn-users</code> for Amazon Cognito user Pools</li>
<li class="">Click <strong>Next</strong></li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-38-30-adee09cae95a829965a4b7ce681b320e.png" width="1160" height="915" class="img_ev3q"></p>
<ol start="6">
<li class="">On the <strong>Assign actions to groups</strong> page:</li>
</ol>
<ul>
<li class="">AVP already imported two groups (<code>admin-users</code> and <code>power-users</code>) from the Cognito user pool</li>
<li class="">Select <code>admin-users</code> group is allowed to perform actions (post /partners) on partners resources</li>
<li class="">Remove the group <code>power-users</code>, so users in this group are not allowed to complete any actions</li>
<li class="">Click <strong>Next</strong></li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-40-27-d2b11f656211e38b0a7d6a09ead2f9b9.png" width="973" height="915" class="img_ev3q"></p>
<ol start="7">
<li class="">Review <strong>Deploy app integration</strong> and click <strong>Create policy store</strong></li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-41-47-08f2a9503ae6382f4b6c9da2c7eaa284.png" width="1493" height="915" class="img_ev3q"></p>
<ol start="7">
<li class="">
<p>This will trigger CloudFormation stack deployment. Wait for the <strong>Deploy CloudFormation</strong> Status to change to <strong>Success</strong>. This should complete in a few minutes.</p>
</li>
<li class="">
<p>You can also check the status from the <a href="https://console.aws.amazon.com/cloudformation/home" target="_blank" rel="noopener noreferrer" class="">CloudFormation Console</a></p>
</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-42-22-6a84adfc00773314af235e68f8c2667b.png" width="1493" height="915" class="img_ev3q">
<img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-43-48-a3fc9595fffdc43b395a1d5a94ec13fa.png" width="1910" height="915" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="module-3c-attach-avp-authorizer-to-partner-admin-api">Module 3C: Attach AVP Authorizer to Partner Admin API<a href="#module-3c-attach-avp-authorizer-to-partner-admin-api" class="hash-link" aria-label="Direct link to Module 3C: Attach AVP Authorizer to Partner Admin API" title="Direct link to Module 3C: Attach AVP Authorizer to Partner Admin API" translate="no">​</a></h2>
<p>Now that our AVP Policy store is deployed, let&#x27;s attach it to our Partner Admin API Gateway Endpoint Resources.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="attach-avp-custom-authorizer-to-the-partner-admin-service-api">Attach AVP Custom Authorizer to the Partner Admin Service API<a href="#attach-avp-custom-authorizer-to-the-partner-admin-service-api" class="hash-link" aria-label="Direct link to Attach AVP Custom Authorizer to the Partner Admin Service API" title="Direct link to Attach AVP Custom Authorizer to the Partner Admin Service API" translate="no">​</a></h3>
<p>We&#x27;ll attach the Custom Authorizer that AVP deployed in the previous section to our Partner Admin Service API from the console. This Custom Authorizer uses the AVP Policy Store we created earlier to make the authorization decision. If you completed Module 1 and attached a Custom Lambda Authorizer there, replace that with the AVP created custom Lambda Authorizer here.</p>
<ol>
<li class="">
<p>Open the <a href="https://console.aws.amazon.com/apigateway/home" target="_blank" rel="noopener noreferrer" class="">API Gateway Console</a></p>
</li>
<li class="">
<p>Click on <strong>UnicornPartnerAPI-AVP-Module</strong> API</p>
</li>
<li class="">
<p>Click on <strong>/partners</strong> resource and <strong>POST</strong> action</p>
</li>
<li class="">
<p>Under the <strong>Method request</strong> tab, click <strong>Edit</strong></p>
</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-44-54-51f1cea3a15523cc211a8f6d9a8441d3.png" width="1910" height="915" class="img_ev3q"></p>
<ol start="5">
<li class="">
<p>Under the <strong>Edit method request</strong> page, select the Authorizer that starts with <code>AVPAuthorizer-</code> for <strong>Authorization</strong></p>
</li>
<li class="">
<p>Click <strong>Save</strong></p>
</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-45-37-c96de7270499c6ff4d4c172cdf3e39a2.png" width="1303" height="915" class="img_ev3q"></p>
<ol start="7">
<li class="">Click <strong>Deploy API</strong> to deploy it to the <code>dev</code> stage</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-46-09-05196aac58fb2c28e1593faaff856f8f.png" width="1695" height="915" class="img_ev3q">
<img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-46-27-6a6702f7d2fdd14488b096d81b2f9341.png" width="1695" height="915" class="img_ev3q"></p>
<p>Your Partner Admin API is now protected using Amazon Verified Permissions. In the next section, we&#x27;ll test the authorization.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="module-3d-testing">Module 3D: Testing<a href="#module-3d-testing" class="hash-link" aria-label="Direct link to Module 3D: Testing" title="Direct link to Module 3D: Testing" translate="no">​</a></h2>
<p>Now that we&#x27;ve configured Amazon Verified Permissions and attached the authorizer to our Partner Admin API, let&#x27;s test the authorization to ensure it works correctly.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="test-1-register-a-partner-as-admin-user">Test 1: Register a Partner as Admin User<a href="#test-1-register-a-partner-as-admin-user" class="hash-link" aria-label="Direct link to Test 1: Register a Partner as Admin User" title="Direct link to Test 1: Register a Partner as Admin User" translate="no">​</a></h3>
<ol>
<li class="">
<p>Using the API Client tool, we&#x27;re going to make a POST call to the token signing endpoint using the URL you copied earlier in this module</p>
</li>
<li class="">
<p>Navigate to the API Client tool section <strong>Module 3D: Testing</strong></p>
</li>
<li class="">
<p>Populate the following fields:</p>
</li>
</ol>
<ul>
<li class="">The <strong>token signing URL</strong> (ex. <code>https://cognito-idp.us-east-1.amazonaws.com/{YOUR USER POOL ID}/.well-known/jwks.json</code>)</li>
<li class="">The <strong>username</strong> of the first user you created and added to the admin group (ex. username)</li>
<li class="">The <strong>password</strong> for the user</li>
<li class="">The <strong>Client ID</strong> we copied from earlier in this module</li>
</ul>
<ol start="4">
<li class="">
<p>You will notice the body is dynamically created using your inputs. This is the format your applications would send to the token signing endpoint</p>
</li>
<li class="">
<p>Click <strong>Get Access Token</strong></p>
</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-52-53-a65e1c0306fd20da1c364d2d411b888b.png" width="971" height="634" class="img_ev3q">
<img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-53-47-c85379ce4b68fafcf2cb4fc358e20d45.png" width="958" height="635" class="img_ev3q"></p>
<ol start="6">
<li class="">
<p>Copy and paste the new AVP API Gateway URL you copied earlier in this module into the textbox just below the access token Response</p>
</li>
<li class="">
<p>Include a <code>/partners</code> path at the end of your API Gateway endpoint</p>
</li>
<li class="">
<p>In the <strong>Body JSON</strong> section, add a new partner by copying and pasting the JSON below:</p>
</li>
</ol>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;Grape Company&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<ol start="9">
<li class="">
<p>Click <strong>Send</strong></p>
</li>
<li class="">
<p>Since the user you added to the <strong>admin-users</strong> Cognito group has permissions through AVP to access the new <code>/partners</code> API path, they are authorized to create new partners</p>
</li>
<li class="">
<p>You should receive a response back with a new Client ID and Client Secret:</p>
</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-54-25-ce0f8bdc27624d1421a6e52bde3bf871.png" width="958" height="661" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="test-2-test-with-power-user-should-fail">Test 2: Test with Power User (Should Fail)<a href="#test-2-test-with-power-user-should-fail" class="hash-link" aria-label="Direct link to Test 2: Test with Power User (Should Fail)" title="Direct link to Test 2: Test with Power User (Should Fail)" translate="no">​</a></h3>
<ol start="12">
<li class="">Repeat the steps above to test with the user you added to the <strong>power-users</strong> Cognito group (ex. username2)
<img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-58-27-fdc74962de7e34b47930513df5cc509e.png" width="964" height="629" class="img_ev3q">
<img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-58-44-90715a7d417a0cc2116491a33ba67100.png" width="956" height="629" class="img_ev3q"></li>
<li class="">Use a new partner by copying the JSON below into the <strong>Body JSON</strong> section:</li>
</ol>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;Raspberry Company&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<ol start="14">
<li class="">
<p>Click <strong>Send</strong></p>
</li>
<li class="">
<p>This time, the call to the <code>/partners</code> API path should fail with an <strong>explicit deny</strong> because your user is not authorized to call the <code>/partners</code> API path</p>
</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/2026-01-29-10-59-06-5bf7862b19bf9a06c45812890a8aae37.png" width="957" height="572" class="img_ev3q"></p>
<hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/khanhquoc4114/serverless-security-workshop/tree/main/packages/create-docusaurus/templates/shared/docs/module-03/module-3-verified-permissions.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/module-02/module-2-lambda-iam"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Module 2: Lambda IAM</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/module-04/module-4-secrets"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Module 4: Secrets</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#what-is-amazon-verified-permissions" class="table-of-contents__link toc-highlight">What is Amazon Verified Permissions?</a></li><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a></li></ul></li><li><a href="#module-3a-add-partner-users-to-cognito-groups" class="table-of-contents__link toc-highlight">Module 3A: Add Partner Users to Cognito Groups</a><ul><li><a href="#part-1-update-cloudformation-template" class="table-of-contents__link toc-highlight">Part 1: Update CloudFormation Template</a></li><li><a href="#part-2-retrieve-cognito-configuration" class="table-of-contents__link toc-highlight">Part 2: Retrieve Cognito Configuration</a></li><li><a href="#part-3-create-users-in-cognito" class="table-of-contents__link toc-highlight">Part 3: Create Users in Cognito</a></li><li><a href="#part-4-create-power-user" class="table-of-contents__link toc-highlight">Part 4: Create Power User</a></li></ul></li><li><a href="#module-3b-admin-service-authorization-using-amazon-verified-permission" class="table-of-contents__link toc-highlight">Module 3B: Admin Service Authorization using Amazon Verified Permission</a><ul><li><a href="#create-a-policy-store" class="table-of-contents__link toc-highlight">Create a Policy Store</a></li></ul></li><li><a href="#module-3c-attach-avp-authorizer-to-partner-admin-api" class="table-of-contents__link toc-highlight">Module 3C: Attach AVP Authorizer to Partner Admin API</a><ul><li><a href="#attach-avp-custom-authorizer-to-the-partner-admin-service-api" class="table-of-contents__link toc-highlight">Attach AVP Custom Authorizer to the Partner Admin Service API</a></li></ul></li><li><a href="#module-3d-testing" class="table-of-contents__link toc-highlight">Module 3D: Testing</a><ul><li><a href="#test-1-register-a-partner-as-admin-user" class="table-of-contents__link toc-highlight">Test 1: Register a Partner as Admin User</a></li><li><a href="#test-2-test-with-power-user-should-fail" class="table-of-contents__link toc-highlight">Test 2: Test with Power User (Should Fail)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Built with ❤️ at AWS. <br> Copyright © 2026 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>