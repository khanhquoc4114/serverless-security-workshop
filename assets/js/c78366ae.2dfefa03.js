"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[512],{1615(e,n,s){s.d(n,{A:()=>i});const i=s.p+"assets/images/2026-01-28-11-48-40-a78b86d4bf17e701b755d5597c46d050.png"},2279(e,n,s){s.d(n,{A:()=>i});const i=s.p+"assets/images/2026-01-28-11-44-00-5b664bb00da35c62e171e226e228d074.png"},3368(e,n,s){s.d(n,{A:()=>i});const i=s.p+"assets/images/2026-01-28-10-53-55-d6b70fd893f1c2c2a5cfa6055be6e0b1.png"},3449(e,n,s){s.d(n,{A:()=>i});const i=s.p+"assets/images/2026-01-28-11-41-49-1dbdb0dd4cf960d3e048b04640defde6.png"},4826(e,n,s){s.d(n,{A:()=>i});const i=s.p+"assets/images/2026-01-28-11-45-37-ce04698d86b7b5f85c9d80d9925e5885.png"},6346(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"module-05/module-5-input-validation","title":"Module 5: Input Validation on API Gateway","description":"Overview","source":"@site/docs/module-05/module-5-input-validation.md","sourceDirName":"module-05","slug":"/module-05/module-5-input-validation","permalink":"/serverless-security-workshop/docs/module-05/module-5-input-validation","draft":false,"unlisted":false,"editUrl":"https://github.com/khanhquoc4114/serverless-security-workshop/tree/main/packages/create-docusaurus/templates/shared/docs/module-05/module-5-input-validation.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Module 4: Secrets","permalink":"/serverless-security-workshop/docs/module-04/module-4-secrets"},"next":{"title":"Module 6: Dependency Vulnerability","permalink":"/serverless-security-workshop/docs/module-06/module-6-dependency-vulnerability"}}');var t=s(4848),r=s(8453);const l={},d="Module 5: Input Validation on API Gateway",c={},a=[{value:"Overview",id:"overview",level:2},{value:"Requirements for Customization Request",id:"requirements-for-customization-request",level:2},{value:"Module 5A: Create Model",id:"module-5a-create-model",level:2},{value:"Module 5B: Testing",id:"module-5b-testing",level:2},{value:"Test 1: Missing Required Fields",id:"test-1-missing-required-fields",level:3},{value:"Test 2: Invalid URL Format",id:"test-2-invalid-url-format",level:3},{value:"Test 3: SQL Injection Attack (Non-Numeric Value in Cape Field)",id:"test-3-sql-injection-attack-non-numeric-value-in-cape-field",level:3},{value:"Test 4: Correct parameters",id:"test-4-correct-parameters",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"module-5-input-validation-on-api-gateway",children:"Module 5: Input Validation on API Gateway"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"Input validation is the most critical security control for web applications:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"API Gateway validates requests before invoking Lambda functions"}),"\n",(0,t.jsx)(n.li,{children:"Failed validation returns 400 Bad Request immediately"}),"\n",(0,t.jsx)(n.li,{children:"Invalid requests never reach your Lambda function"}),"\n",(0,t.jsx)(n.li,{children:"Validation results are logged in CloudWatch"}),"\n",(0,t.jsx)(n.li,{children:"This reduces unnecessary Lambda invocations and costs"}),"\n",(0,t.jsx)(n.li,{children:"Frees Lambda to focus on business logic rather than input validation"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(3368).A+"",width:"666",height:"205"})}),"\n",(0,t.jsx)(n.h2,{id:"requirements-for-customization-request",children:"Requirements for Customization Request"}),"\n",(0,t.jsx)(n.p,{children:"Customization request must include:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"name"}),": Customization name (required, string)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"imageUrl"}),": URL for cape image (required, valid URL format)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"sock"}),": Sock type ID (required, numeric)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"horn"}),": Horn ID (required, numeric)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"glasses"}),": Glasses ID (required, numeric)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"cape"}),": Cape type ID (required, numeric)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"company"}),": Company ID (optional, numeric)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"module-5a-create-model",children:"Module 5A: Create Model"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Open the ",(0,t.jsx)(n.a,{href:"https://console.aws.amazon.com/apigateway/home",children:"AWS API Gateway Console"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click on the ",(0,t.jsx)(n.strong,{children:"CustomizeUnicorns"})," API"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click on ",(0,t.jsx)(n.strong,{children:"Models"})," in the left navigation"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click ",(0,t.jsx)(n.strong,{children:"Create model"})," button"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Enter model name: ",(0,t.jsx)(n.code,{children:"CustomizationPost"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Set Content type: ",(0,t.jsx)(n.code,{children:"application/json"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"In the Model schema field, paste the following JSON schema:"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "title": "Customizations",\n  "$schema": "http://json-schema.org/draft-04/schema#",\n  "type": "object",\n  "required": ["imageUrl", "sock", "horn", "glasses", "cape", "name"],\n  "properties": {\n    "imageUrl": {\n      "type": "string",\n      "title": "The Imageurl Schema",\n      "pattern": "^https?:\\\\/\\\\/[-a-zA-Z0-9@:%_+.~#?&//=]+$"\n    },\n    "name": {\n      "type": "string",\n      "title": "The name Schema",\n      "pattern": "^[a-zA-Z0-9- ]+$"\n    },\n    "sock": {\n      "type": "string",\n      "title": "The Sock Schema",\n      "pattern": "^[0-9]*$"\n    },\n    "horn": {\n      "type": "string",\n      "title": "The Horn Schema",\n      "pattern": "^[0-9]*$"\n    },\n    "glasses": {\n      "type": "string",\n      "title": "The Glasses Schema",\n      "pattern": "^[0-9]*$"\n    },\n    "cape": {\n      "type": "string",\n      "title": "The Cape Schema",\n      "pattern": "^[0-9]*$"\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(3449).A+"",width:"949",height:"915"})}),"\n",(0,t.jsxs)(n.ol,{start:"8",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click ",(0,t.jsx)(n.strong,{children:"Create"})," button"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click on ",(0,t.jsx)(n.strong,{children:"Resources"})," in the left navigation"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Expand ",(0,t.jsx)(n.strong,{children:"/customizations"})," and click on ",(0,t.jsx)(n.strong,{children:"POST"})," method"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click on the ",(0,t.jsx)(n.strong,{children:"Method Request"})," tab"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click the ",(0,t.jsx)(n.strong,{children:"Edit"})," button in the Method execution section"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(2279).A+"",width:"1350",height:"915"})}),"\n",(0,t.jsxs)(n.ol,{start:"13",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Under Method request settings, click on ",(0,t.jsx)(n.strong,{children:"Request validator"})," dropdown"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Select ",(0,t.jsx)(n.strong,{children:"Validate body"})," as the request validator"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click ",(0,t.jsx)(n.strong,{children:"Request body"})," to expand that section"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click ",(0,t.jsx)(n.strong,{children:"Add model"})," button"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Set Content type: ",(0,t.jsx)(n.code,{children:"application/json"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Set Model name: ",(0,t.jsx)(n.code,{children:"CustomizationPost"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click the ",(0,t.jsx)(n.strong,{children:"Save"})," button"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(4826).A+"",width:"914",height:"915"})}),"\n",(0,t.jsxs)(n.ol,{start:"20",children:["\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Deploy API"})," button at the top right"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(9988).A+"",width:"1375",height:"915"})}),"\n",(0,t.jsxs)(n.ol,{start:"21",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Select ",(0,t.jsx)(n.code,{children:"dev"})," as the Deployment stage"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click ",(0,t.jsx)(n.strong,{children:"Deploy"})," to confirm"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(9940).A+"",width:"1375",height:"915"})}),"\n",(0,t.jsxs)(n.ol,{start:"23",children:["\n",(0,t.jsx)(n.li,{children:"Verify the API deployment completed successfully"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(1615).A+"",width:"1375",height:"915"})}),"\n",(0,t.jsx)(n.h2,{id:"module-5b-testing",children:"Module 5B: Testing"}),"\n",(0,t.jsx)(n.h3,{id:"test-1-missing-required-fields",children:"Test 1: Missing Required Fields"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Send a request with missing ",(0,t.jsx)(n.code,{children:"sock"})," and ",(0,t.jsx)(n.code,{children:"horn"})," fields:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Cherry-themed unicorn",\n  "imageUrl": "https://en.wikipedia.org/wiki/Cherry#/media/File:Cherry_Stella444.jpg",\n  "glasses": "3",\n  "cape": "4"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(8792).A+"",width:"972",height:"640"})}),"\n",(0,t.jsx)(n.h3,{id:"test-2-invalid-url-format",children:"Test 2: Invalid URL Format"}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Send a request with an invalid URL format:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Cherry-themed unicorn",\n  "imageUrl": "htt://en.wikipedia.org/wiki/Cherry#/media/File:Cherry_Stella444.jpg",\n  "sock": "1",\n  "horn": "2",\n  "glasses": "3",\n  "cape": "4"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(6805).A+"",width:"973",height:"638"})}),"\n",(0,t.jsx)(n.h3,{id:"test-3-sql-injection-attack-non-numeric-value-in-cape-field",children:"Test 3: SQL Injection Attack (Non-Numeric Value in Cape Field)"}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"Send a request with a SQL injection payload in the cape field:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Orange-themed unicorn",\n  "imageUrl": "https://en.wikipedia.org/wiki/Orange_(fruit)#/media/File:Orange-Whole-%26-Split.jpg",\n  "sock": "1",\n  "horn": "2",\n  "glasses": "3",\n  "cape": "2); INSERT INTO Socks (NAME,PRICE) VALUES (\'Bad color\', 10000.00"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(6694).A+"",width:"970",height:"632"})}),"\n",(0,t.jsx)(n.h3,{id:"test-4-correct-parameters",children:"Test 4: Correct parameters"}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsx)(n.li,{children:"Testing the POST /customizations API with right parameters:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{ \n  "name":"Cherry-themed unicorn",\n  "imageUrl":"https://en.wikipedia.org/wiki/Cherry#/media/File:Cherry_Stella444.jpg",\n  "sock": "1",\n  "horn": "2",\n  "glasses": "3",\n  "cape": "4"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(7062).A+"",width:"965",height:"529"})}),"\n",(0,t.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},6694(e,n,s){s.d(n,{A:()=>i});const i=s.p+"assets/images/2026-01-28-12-52-05-4152d792ae1d6b49a440e23feddb2ba4.png"},6805(e,n,s){s.d(n,{A:()=>i});const i=s.p+"assets/images/2026-01-28-12-51-18-66e8483f6b0e33b13b9a22697e5445c3.png"},7062(e,n,s){s.d(n,{A:()=>i});const i=s.p+"assets/images/2026-01-28-12-55-31-110273b975289c2e4e661154ec52ea4b.png"},8453(e,n,s){s.d(n,{R:()=>l,x:()=>d});var i=s(6540);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}},8792(e,n,s){s.d(n,{A:()=>i});const i=s.p+"assets/images/2026-01-28-12-50-34-a89c9286d76a027c177eb59ac6c99fbe.png"},9940(e,n,s){s.d(n,{A:()=>i});const i=s.p+"assets/images/2026-01-28-11-47-20-d7861b7891b3533fe87ed9ade7c726e8.png"},9988(e,n,s){s.d(n,{A:()=>i});const i=s.p+"assets/images/2026-01-28-11-46-45-b30bcf5d02e0ba368ab6d438fcdf11cd.png"}}]);